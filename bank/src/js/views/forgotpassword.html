<div class="oj-hybrid-padding"
    style="max-width:450px; margin:auto; padding:30px; background:#fff; border-radius:12px; box-shadow:0 4px 8px rgba(0,0,0,0.1)">

    <h2 style="text-align:center; color:#2c3e50; margin-bottom:20px">Forgot Password</h2>

    <!-- Step 1: Request -->
    <div data-bind="if: currentStep() === 'request'">
        <oj-form-layout max-columns="1">
            <oj-input-text value="{{email}}" label-hint="Email" required="true"></oj-input-text>
            <oj-input-text value="{{mobile}}" label-hint="Mobile Number" required="true"></oj-input-text>
            <oj-button on-oj-action="[[requestReset]]"
                style="margin-top:15px; width:100%;  border-radius:6px; background:#1976d2; color:white">Send
                Verification Code</oj-button>

            <!-- <div style="text-align:center; margin-top:20px;">
        <oj-button on-oj-action="[[requestReset]]"
          style="background:#1976d2;  border-radius:6px; padding:8px 4px;">
          Send Verification Code
        </oj-button>
      </div> -->
        </oj-form-layout>

    </div>

    <!-- Step 2: Verify -->
    <!-- <div data-bind="if: currentStep() === 'verify'">
    <oj-form-layout max-columns="1">
      <oj-input-text value="{{code}}" label-hint="Enter Verification Code" required="true"></oj-input-text>
      <oj-button on-oj-action="[[verifyCode]]" style="margin-top:15px; width:100%; background:#1976d2; color:white">
        Verify Code
      </oj-button>
    </oj-form-layout>
  </div> -->

    <!-- Step 2: Verify -->
    <div data-bind="if: currentStep() === 'verify'">
        <!-- <div style="text-align:center; margin-bottom:20px;">
    <p data-bind="text: maskedEmail">"Enter the 6-digit verification code sent to [masked email]</p>
  </div> -->
        <div style="text-align:center; margin-bottom:20px;">
            <p>Enter the 6-digit verification code sent to <strong data-bind="text: maskedEmail"></strong></p>
        </div>

        <div style="display:flex; justify-content:center; gap:10px; margin-bottom:15px;">
            <!-- 6 OTP input boxes -->
            <input type="text" maxlength="1" class="otp-box" data-bind="value: otp1, event: { keyup: moveNext }">
            <input type="text" maxlength="1" class="otp-box" data-bind="value: otp2, event: { keyup: moveNext }">
            <input type="text" maxlength="1" class="otp-box" data-bind="value: otp3, event: { keyup: moveNext }">
            <input type="text" maxlength="1" class="otp-box" data-bind="value: otp4, event: { keyup: moveNext }">
            <input type="text" maxlength="1" class="otp-box" data-bind="value: otp5, event: { keyup: moveNext }">
            <input type="text" maxlength="1" class="otp-box" data-bind="value: otp6, event: { keyup: moveNext }">
        </div>

        <oj-button on-oj-action="[[verifyCode]]"
            style="width:50%; margin:auto; display:block; background:#1976d2; color:white;">
            Verify Code
        </oj-button>
    </div>


    <!-- Step 3: Reset -->
    <div data-bind="if: currentStep() === 'reset'">
        <oj-form-layout max-columns="1">
            <oj-input-password value="{{newPassword}}" label-hint="New Password" required="true"
                validators="[[newPasswordValidator]]"></oj-input-password>
            <oj-input-password value="{{confirmPassword}}" label-hint="Confirm Password"
                required="true"></oj-input-password>

            <!-- <oj-input-password value="{{newPassword}}" label-hint="New Password" required="true"></oj-input-password> -->
            <oj-button on-oj-action="[[resetPassword]]"
                style="margin-top:15px; width:100%; background:#1976d2; color:white">
                Reset Password
            </oj-button>
        </oj-form-layout>
    </div>

    <!-- Messages -->
    <div data-bind="if: message" style="margin-top:15px; text-align:center;">
        <p data-bind="text: message" style="color: green; font-weight:500;"></p>
    </div>
    <div data-bind="if: error" style="margin-top:15px; text-align:center;">
        <p data-bind="text: error" style="color: red; font-weight:500;"></p>
    </div>

    <p style="text-align:center; margin-top:10px;">
        Back to <a href="?ojr=login" style="color:#1976d2; text-decoration:none;">Login</a>
    </p>
</div>
<style>
    .otp-box {
        width: 40px;
        height: 50px;
        text-align: center;
        font-size: 24px;
        border: 1px solid #ccc;
        border-radius: 6px;
        background: #f5f5f5;
    }

    .otp-box:focus {
        border-color: #1976d2;
        outline: none;
        background: #fff;
    }
</style>