<div class="oj-hybrid-padding"
  style="max-width:800px; margin:auto; padding:30px 90px; background:#fff; border-radius:12px; box-shadow:0 4px 8px rgba(0,0,0,0.1)">

  <h2 style="text-align:center; color:#1976d2; margin-bottom:20px;">
    🔐 Transaction
  </h2>

  <oj-form-layout max-columns="1" direction="row" class="oj-formlayout-full-width" user-assistance-density="compact">

    <!-- To Account -->
    <oj-input-text id="toAccountNumber" value="{{toAccountNumber}}" label-hint="Recipient Account Number"
      required="true" placeholder="Enter Recipient Account Number">
    </oj-input-text>

    <!-- Amount -->
    <oj-input-number value="{{amount}}" min="1" label-hint="Amount" required="true" placeholder="Enter Amount">
    </oj-input-number>

      <oj-input-password id="pin" value="{{mpin}}" label-hint="PIN" required="true"
      validators="[[mpinValidator]]" placeholder="Enter 6-Digit PIN"></oj-input-password>
    <!-- MPIN -->
    <!-- <oj-input-text value="{{mpin}}" label-hint="PIN" required="true" placeholder="Enter 6-Digit PIN"> -->
    </oj-input-text>

    <!-- CAPTCHA Section with Banking Style -->
    <div
      style="margin-top: 20px; padding: 15px; background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); border-radius: 8px; border: 1px solid #cbd5e1;">
      <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #334155; font-size: 14px;"> Security Verification
      </label>
      <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;"> <canvas id="captchaCanvas"
          width="200" height="70"
          style="border: 2px solid #3b82f6; border-radius: 6px; background: #ffffff; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        </canvas>
         <button type="button" data-bind="click: generateCaptcha"
          style="padding: 8px 12px; background: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px; transition: background 0.2s;"
          onmouseover="this.style.background='#2563eb'" onmouseout="this.style.background='#3b82f6'"> 🔄 Refresh
        </button>
       </div> 
       <small style="color: #64748b; font-size: 12px; display: block; margin-bottom: 8px;"> *This helps us verify you are not a robot</small>

    </div> <!-- CAPTCHA Input -->
     <oj-input-text id="captchaInput" value="{{captchaInput}}" label-hint="Captcha "
      required="true" placeholder="Type characters from image"> </oj-input-text>
    <!-- Submit Button -->
    <oj-button on-oj-action="[[submitTransaction]]" disabled="[[isProcessing]]"

      style="margin-top:10px; width:100%; background:#1976d2; color:white;">
      <span data-bind="text: isProcessing() ? 'Processing...' : 'Submit'"></span>
    </oj-button>

  </oj-form-layout>

  <div data-bind="if: message" style="margin-top:15px; text-align:center;">
    <p data-bind="text: message" style="color:red; font-weight:500;"></p>
  </div>
</div>

<oj-dialog id="transactionSuccessDialog" title="Transaction Deatails">
  <div style="padding: 0px; text-align: center;">
    <!-- <p>Transaction Deatails</p> -->
    <p>Reference ID: <span data-bind="text: transactionRefId"></span></p>
    <p>Amount: ₹<span data-bind="text: modalAmount"></span></p>
<p>To Account Number: <span data-bind="text: modalToAccount"></span></p>
<p> Transaction Status: <span data-bind="text: modalStatus"></span></p>

  </div>
  <oj-dialog-footer style="display:flex; justify-content:flex-end;">
  <oj-button on-oj-action="[[closeSuccessDialog]]">
    Continue
  </oj-button>
</oj-dialog-footer>


</oj-dialog>

<oj-dialog id="invalidMpinDialog" title="Authentication Failed">
  <div style="padding:20px; text-align:center; color:#b91c1c;">
    <p>❌ Incorrect MPIN. Please try again.</p>
  </div>
  <oj-dialog-footer style="display:flex; justify-content:flex-end;">
    <oj-button on-oj-action="[[closeInvalidMpinDialog]]">
      Close
    </oj-button>
  </oj-dialog-footer>
</oj-dialog>

